Intimate ecological interactions, such as those between parasites and their hosts, may persist over long time spans, coupling the evolutionary histories of the lineages involved. Most methods that reconstruct the coevolutionary history of such associations make the simplifying assumption that symbionts have a single host. We developed a Bayesian approach for inferring coevolutionary history based on a model that allows symbionts to use multiple simultaneous hosts and to preferentially colonise new hosts that are phylogenetically similar to other hosts in it's host repertoire. These features reveal the entire distribution of ancestral states at any given point in time, allowing us to build networks of all inferred interactions at different times in the past. By reconstructing ancestral networks, we show how specific host shifts, host-range expansions, and recolonisations of ancestral hosts have shaped the network of interactions between Pieridae butterflies and their angiosperm host plants over time, creating an evolutionarily stable modular and nested structure. Our approach can be used to test ideas about the evolution of ecological networks in many other systems besides herbivorous insects. 
